<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Información Tren</title>
  <link href = "menuprincipal.css" rel = "stylesheet">

</head>

<body style = "background-image: url('image 1.png');">

<div class="header">

  <div class="logo">
    <img src = "Captura 1.png" height = 150  width = 300>
  </div>

  <nav class="navbar">
    <a href="index.html">Inicio</a>
    <a href="lineas.html">Lineas</a>
    <a href="Ayuda.html">Ayuda</a>
  </nav>

  <div class= "Metrovia">
    <p>
    Metrovía
    </p>
  </div>

</div>

<main>

<div class="ProxTren">
  <div class="RecProxTr"></div><span class="TxtNumTr">No hay</span><span class="TxtProxTr">Proximo tren:</span>
</div>

<section class="Vagon one">
  <div class="RecVagonOne">
  <div class= "HeaderTitulo">
    <p>
      Vagon 1
    </p>
  </div>
  <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
  <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
  <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
  <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
  <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
</section>

<section class="Vagon two">
<div class="RecVagonTwo">
  <div class= "HeaderTitulo">
    <p>
      Vagon 2
    </p>
  </div>
  <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
  <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
  <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
  <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
  <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
  </div>
</section>

<section class="Vagon Three">
  <div class="RecVagonThree">
    <div class= "HeaderTitulo">
      <p>
        Vagon 3
      </p>
    </div>
    <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
    <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
    <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
    <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
    <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
    </div>
  </section>

  <section class="Vagon Four">
    <div class="RecVagonFour">
      <div class= "HeaderTitulo">
        <p>
          Vagon 4
        </p>
      </div>
      <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
      <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
      <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
      <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
      <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
      </div>
    </section>

  <section class="Vagon Five">
      <div class="RecVagonFive">
        <div class= "HeaderTitulo">
          <p>
            Vagon 5
          </p>
        </div>
        <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
        <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
        <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
        <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
        <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
        </div>
    </section>

  <section class="Vagon Six">
      <div class="RecVagonSix">
        <div class= "HeaderTitulo">
          <p>
            Vagon 6
          </p>
        </div>
        <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
        <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
        <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
        <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
        <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
        </div>
    </section>

    <section class="Vagon Seven">
      <div class="RecVagonSeven">
        <div class= "HeaderTitulo">
          <p>
            Vagon 7
          </p>
        </div>
        <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
        <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
        <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
        <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
        <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
        </div>
    </section>

    <section class="Vagon Eight">
      <div class="RecVagonEight">
        <div class= "HeaderTitulo">
          <p>
            Vagon 8
          </p>
        </div>
        <img class = "VagPerOne" src = "Vagones/Persona.png"><label for = "NumPerOne" id = "NumPerOne"></label>
        <img class = "VagTemOne" src = "Vagones/Temperatura.png"><label for="NumTemOne" id = "NumTemOne"></label>
        <img class = "VagSonOne" src = "Vagones/Sonido.png"><label for="NumSonOne" id = "NumSonOne"></label>
        <img class = "VagGotaOne" src = "Vagones/Gota de agua.png"><label for="NumGotaOne" id = "NumGotaOne"></label>
        <img class = "VagOxyOne" src = "Vagones/Sonidoo.webp"><label for="NumOxyOne" id = "NumOxyOne"></label>
        </div>
    </section>
</main>
<script>
  const params = new URLSearchParams(window.location.search);
  var linea = params.getAll("linea")[0]
  var estacion = params.getAll("estacion")[0]
  var terminal = params.getAll("terminal")[0]
  var sections_vagones;
  console.log({linea, estacion, terminal})

  window.onload = function(e){ 
    sections_vagones = document.querySelectorAll(".Vagon");

    fetch("/info?linea=" + linea + "&estacion=" + estacion + "&terminal=" + terminal)
    .then( r => r.json())
    .then(data => {
      document.querySelector(".TxtNumTr").innerText = "Tren " + data[0].IDtren;
      var labels;
      sections_vagones.forEach((sv, i) => {
        //console.table(data[i])
        labels = sv.querySelectorAll("label");
        labels[0].innerText = data[i].cant_de_personas
        labels[1].innerText = data[i].temperatura
        labels[2].innerText = data[i].nivel_de_sonido
        labels[3].innerText = data[i].humedad
        labels[4].innerText = data[i].calidad_de_aire  
      });


      /*data.forEach(d => {
        console.table({
          calidad_de_aire: d.calidad_de_aire,
          cant_de_personas: d.cant_de_personas,
          clave: d.clave,
          humedad: d.humedad,
          nivel_de_sonido: d.nivel_de_sonido,
          temperatura: d.temperatura
        }
        )
      })*/
    })
    .catch(e =>console.log(e));
  
}
</script>
</body>
</html>